<div class="row info" style="padding-top:20px;padding-bottom:20px;">
            <div class="col-sm-3 text-center vertical-center">
		    <nvd3 options="subtotals.options" data="subtotals.data"></nvd3>
            </div>
            <div class="col-xs-6 text-center">
                <h2>Explore the behaviour of your candidate genes, pathways or genome regions across the Blueprint datasets.</h2>
                <p>The Blueprint project will provide at least 100 reference epigenomes to the scientific community. These epigenomes are characterized by: RNAseq, BisulfiteSeq, DNase-seq, and 8 Histone marks</p>
                <p>Use this tool to explore the behaviour of your gene in the different cell types</p>
                <p>
                <a tooltip-placement="bottom" tooltip="{{dataDesc}}"><b>Data release - {{dataRelease}}</b></a>
                </p>           
            </div>
            <div class="col-sm-3 text-center vertical-center">
		    <nvd3 options="analysisSubtotals.options" data="analysisSubtotals.data"></nvd3>
            </div>
</div>

  <div class="row">
    <div class="col-sm-12">
      <form class="form-horizontal" role="form">
        <div class="form-group form-group-lg">
	<div class="col-sm-3 text-center">
		<label>Tree options</label>
		<div class="form-group">
			<label class="checkbox-inline">
				<input type="radio" name="display" ng-model="display" ng-disabled="queryInProgress" value="compact"> Compact
			</label>
			<label class="checkbox-inline">
				<input type="radio" name="display" ng-model="display" ng-disabled="queryInProgress" value="detailed"> Detailed
			</label>
			<label class="checkbox-inline">
				<input type="radio" name="display" ng-model="display" ng-disabled="queryInProgress" value="none"> Hide
			</label>
		</div>
	</div>
          <div class="col-sm-6">
            <input ng-model="query" ng-change="suggest()" ng-keypress="enterSearch($event)" ng-disabled="queryInProgress" ng-readonly="queryInProgress || suggestInProgress" class="form-control" type="text" id="search" placeholder="Search by gene name, Ensembl gene Id, chromosome region or Reactome pathway id" style="background:#f5f5f5">
            <!-- <p class="small">Chromosome regions should be shorter than 10Kb</p> -->
	    <p class="text-center">Examples: <a ng-click="query='myc'; search()" style="cursor: pointer;">Myc</a>, <a ng-click="query='TET1'; search()" style="cursor: pointer;">TET1</a>, <a ng-click="query='IRF8'; search()" style="cursor: pointer;">IRF8</a>, <a ng-click="query='NFIB'; search()" style="cursor: pointer;">NFIB</a>, <a ng-click="query='chr1:1-248956422'; search()" style="cursor: pointer;">chr1:1-248956422</a>, <a ng-click="query='REACT_160159.2'; search()" style="cursor: pointer;">REACT_160159.2</a>, <a ng-click="query='pathway:Cell Cycle, Mitotic'; search()">pathway:Cell Cycle, Mitotic</a></p>
		<div class="suggest-container">
		  <div ng-repeat="suggest in resultsSearch" class="suggest-item">
			  <i>({{suggest.feature}})</i> <a ng-click="query=suggest.term; search(suggest)" style="cursor:pointer">{{suggest.fullTerm}}</a>
			  <br />
		  </div>
		</div>
          </div>
          <div class="col-sm-3 text-center"><button ng-click="search()" ng-disabled="queryInProgress" type="button" class="btn btn-primary btn-lg">{{searchButtonText}}</button></div>
        </div>
      </form>
    </div>
  </div> 

<tabset style="margin-top:40px;" ng-show="graphData.length &gt; 0">
	<tab ng-repeat="rangeData in graphData">
		<tab-heading>Region {{rangeData.range.chr}}:{{rangeData.range.start}}-{{rangeData.range.end}}</tab-heading>
		<!--
		<div class="col-sm-1 text-center" ng-cloak>
			<img src="{{rangeData.gChro.f}}" class="img-responsive img-center vertical-center" title="Chromosome {{rangeData.gChro.n}}" ng-cloak>
		</div>
		-->
		<p class="text-center" ng-bind-html="found"></p>
		<div class="col-sm-2 terms-selector">
			<table style="width:100%;">
				<tr style="vertical-align:top;"><td><span class="square" ng-click="hideAllSeries(rangeData)" style="border-color: #202020 ; background-color: white;"></span></td><td class="term">Hide all cell types</td></tr>
				<tr style="vertical-align:top;"><td><span class="square" ng-click="showAllSeries(rangeData)" style="border-color: #202020 ; background-color: #202020;"></span></td><td class="term">Show all cell types</td></tr>
				<tr><td>&nbsp;</td><td>&nbsp;</td></tr>
				<tr style="vertical-align:top;" ng-repeat="termNode in rangeData.termNodes" ng-if="termNode.wasSeen">
					<td><span class="circle" ng-click="switchTermNode(termNode,$parent.rangeData)" style="border-color: {{termNode.color}} ; background-color: {{ termNode.termHidden ? 'white' : termNode.color}};"></span></td><td class="term" style="color: {{ termNode.termHidden ? 'gray' : 'inherit'}};">{{termNode.name}}</td>
				</tr>
			</table>
		</div>
		
		<div class="col-sm-10 text-center vertical-center" ng-show="rangeData.charts.length &gt; 0">
			<div class="panel panel-default" ng-repeat="chart in rangeData.charts">
				<div class="panel-heading">
					<h5 class="panel-title">
						<a ng-click="chart.isClosed = !chart.isClosed"><i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': !chart.isClosed, 'glyphicon-chevron-right': chart.isClosed}"></i>{{chart.title}}<i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': !chart.isClosed, 'glyphicon-chevron-left': chart.isClosed}"></i></a>
					</h5>
				</div>
				<div collapse="chart.isClosed">
					<div class="panel-body">
						<nvd3 ng-if="chart.library==='nvd3'" options="chart.options" data="chart.data"></nvd3>
						<canvasjs ng-if="chart.library==='canvasjs'" options="chart.options" data="chart.data"></canvasjs>
					</div>
				</div>
			</div>
			
			<!-- alternate concept
			<div class="panel panel-default" ng-repeat="ontology in rangeData.treedata">
				<div class="panel-heading">
					<h5 class="panel-title">
						<a ng-click="ontology.isClosed = !ontology.isClosed"><i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': !ontology.isClosed, 'glyphicon-chevron-right': ontology.isClosed}"></i><i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': !ontology.isClosed, 'glyphicon-chevron-left': ontology.isClosed}"></i></a>
					</h5>
				</div>
				<div collapse="ontology.isClosed">
					<div class="panel-body">
						<d3-tree data="ontology" label="name" style="display"></d3-tree>      
					</div>
				</div>
			</div>
			-->
		</div>
		
		<div ng-repeat="ontology in rangeData.treedata" class="col-sm-12">
			<d3-tree data="ontology" label="name" style="display"></d3-tree>      
		</div>
	</tab>
</tabset>
